function 魔虫窟_执行(地图)
    if 主程.当前时间 > 地图.节点计时 then
        if 地图.副本节点 == 0 and 地图.固定怪物总数 - 地图.存活怪物总数 >= 60 then
            地图.副本节点 = 1
            地图.节点计时 = 主程.当前时间:AddHours(2.0)
            地图:地图公告("<#T:50607>")

            -- 🆕 添加日程进度：击杀60只怪触发BOSS时给予25点活跃度
            if not Settings.屏蔽日程 then
                local 玩家列表 = 地图:获取玩家列表()
                for i = 0, 玩家列表.Count - 1 do
                    local 玩家 = 玩家列表[i]
                    -- 检查今天是否已领取（防止无限进入副本重复领取）
                    if 玩家.角色数据.零点数字[数字_魔虫窟每日领取记录] == 0 then
                        玩家.角色数据.日程进度.V = 玩家.角色数据.日程进度.V + 25
                        玩家:发送日程详情()
                        玩家.角色数据.零点数字[数字_魔虫窟每日领取记录] = 1
                        地图:地图公告("完成魔虫窟挑战，获得25点活跃度！")
                    end
                end
            end

            local 怪物刷新 = 获取副本怪物区域(地图, "魔虫窟-BOSS怪物区域"):获取刷新范围()
            范围刷新怪物从地图实例("蛇蝎 魔闪", 地图, 0, 怪物刷新, true, true)
            范围刷新怪物从地图实例("蛇蝎 毒钩", 地图, 0, 怪物刷新, true, true)
            范围刷新怪物从地图实例("蛇蝎 赤牙", 地图, 0, 怪物刷新, true, true)
        else
            地图.节点计时 = 主程.当前时间:AddSeconds(2.0)
        end
    end
end
